<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Pro Trading Dashboard</title>

<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>

<!-- TradingView -->
<script src="https://s3.tradingview.com/tv.js"></script>

<style>
body{margin:0;font-family:Arial;background:#0b0f1a;color:#e5e7eb}

/* BASIC */
.grid{max-width:1200px;margin:auto;padding:20px;display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:20px}
.card{background:#121826;padding:20px;border-radius:16px}
.btn{padding:12px;border:none;border-radius:12px;background:#22c55e;font-weight:bold;cursor:pointer}
input,select{width:100%;padding:10px;margin:6px 0;background:#020617;color:#fff;border:1px solid #333;border-radius:8px}
table{width:100%;border-collapse:collapse}
td,th{padding:8px;border-bottom:1px solid #333}
.ticker{display:flex;gap:20px;padding:10px;border-bottom:1px solid #333}

/* HIDE DASHBOARD INITIALLY */
#dashboard{display:none}

/* ===== PRO UI ===== */
:root{
  --neon:#22c55e;
  --blue:#3b82f6;
  --pink:#ec4899;
}

body{
  background: radial-gradient(circle at top,#0f172a,#020617);
}

/* TOP BAR (ONLY INSIDE DASHBOARD) */
.topbar{
  position:fixed;
  top:0;
  left:0;
  right:0;
  height:64px;
  background:linear-gradient(90deg,#020617,#020617cc);
  display:flex;
  align-items:center;
  justify-content:space-between;
  padding:0 24px;
  z-index:100;
  backdrop-filter: blur(12px);
}

.logo{
  font-size:22px;
  font-weight:900;
  background:linear-gradient(90deg,var(--neon),var(--blue),var(--pink));
  -webkit-background-clip:text;
  color:transparent;
}

.nav-links a{
  margin-left:20px;
  text-decoration:none;
  color:#9ca3af;
  font-weight:600;
}
.nav-links a:hover{color:white}

/* SIDEBAR */
.sidebar{
  position:fixed;
  top:64px;
  left:0;
  bottom:0;
  width:220px;
  background:#020617;
  padding:10px;
  border-right:1px solid #1f2937;
}

.sidebar a{
  display:block;
  padding:14px;
  margin-bottom:10px;
  border-radius:9px;
  color:#9ca3af;
  font-weight:600;
  text-decoration:none;
}
.sidebar a:hover{
  background:linear-gradient(90deg,var(--neon),var(--blue));
  color:#020617;
}

/* DASHBOARD OFFSET */
.dashboard-content{
  margin-left:200px;
  padding-top:90px;
}

/* HERO */
.hero{
  background:linear-gradient(135deg,#020617,#0f172a);
  border-radius:10px;
  padding:30px;
  box-shadow:0 0 50px #22c55e33;
}
.hero h1{font-size:36px;margin:0}
.hero p{color:#9ca3af}

/* PIE */
.pie{
  height:260px;
  width:260px;
  background:conic-gradient(
    #22c55e 0 40%,
    #3b82f6 40% 70%,
    #ec4899 70% 100%
  );
  border-radius:50%;
  margin:auto;
  box-shadow:0 0 40px #22c55e55;
}
</style>
</head>

<body>

<!-- AUTH / LOGIN -->
<div id="authForms" class="grid">
  <div class="card">
    <h2 style="text-align:center">âš¡ Pro Trading</h2>

    <h3>Register</h3>
    <input id="regEmail" placeholder="Email">
    <input id="regPass" type="password" placeholder="Password">
    <button class="btn" onclick="registerUser()">Register</button>

    <hr>

    <h3>Login</h3>
    <input id="loginEmail" placeholder="Email">
    <input id="loginPass" type="password" placeholder="Password">
    <button class="btn" onclick="loginUser()">Login</button>
  </div>
</div>

<!-- DASHBOARD -->
<div id="dashboard">

  <!-- NAV BAR -->
  <div class="topbar">
    <div class="logo">PRO TRADE</div>
    <div class="nav-links">
      <a href="https://jup.ag/swap?ref=5TgkD9EWSjGbWqUyd9qiJKaEc3BEBCXkCsW56XyC3kJu" 
   target="_blank">Swap token</a>
      <a href="#">Portfolio</a>
      <a href="#">News</a>
      <a href="#">Support</a>
    </div>
  </div>

  <!-- SIDEBAR -->
  <div class="sidebar">
    <a href="#">ðŸ“Š Dashboard</a>
    <a href="#">ðŸ’° Invest</a>
    <a href="#">ðŸ“ˆ Markets</a>
    <a href="#">ðŸ“° News</a>
    <a href="#">âš™ Settings</a>
  </div>

  <!-- CONTENT -->
  <div class="dashboard-content">

    <div class="hero card">
      <h1>Trade Smarter. Grow Faster ðŸš€</h1>
      <p>Real-time crypto, gold & market data trusted by modern investors.</p>
    </div>

    <div class="card" style="height:300px">
      <div id="tv-hero" style="height:80%"></div>
    </div>

    <div class="ticker">
      <span>BTC $<b id="btc">0</b></span>
      <span>ETH $<b id="eth">0</b></span>
      <span>GOLD $<b id="gold">0</b></span>
    </div>

    <div class="grid">
      <div class="card">
        <h3>ðŸ’Ž Invest</h3>
        <input id="investAmount" type="number" placeholder="Amount">
        <select id="investAsset">
          <option value="BTC">BTC</option>
          <option value="ETH">ETH</option>
          <option value="GOLD">GOLD</option>
        </select>
        <button class="btn" onclick="deposit()">Deposit</button>
      </div>

      <div class="card">
        <h3>ðŸ“Š Portfolio</h3>
        <table id="portfolioTable">
          <tr><th>Asset</th><th>Amount</th></tr>
        </table>
      </div>

      <div class="card">
        <h3>ðŸ“ˆ Allocation</h3>
        <div class="pie"></div>
      </div>
    </div>

    <div class="grid">
      <div class="card" style="height:200px" id="tv-btc"></div>
      <div class="card" style="height:200px" id="tv-gold"></div>
    </div>

    <div class="card" style="height:220px">
      <div id="tv-news"></div>
    </div>

    <button class="btn" onclick="logoutUser()">Logout</button>

  </div>
</div>

<script>
// FIREBASE
firebase.initializeApp({
  apiKey: "AIzaSyB-aVVMfBNUoMWIK0ahfAG_c3wVGkpLtkM",
  authDomain: "protradingdashboard.firebaseapp.com",
  projectId: "protradingdashboard",
  storageBucket: "protradingdashboard.firebasestorage.app",
  messagingSenderId: "297586635934",
  appId: "1:297586635934:web:05a3b38f87d69d837a778f",
  databaseURL: "https://protradingdashboard-default-rtdb.firebaseio.com"
});

const auth=firebase.auth();
const db=firebase.database();

function registerUser(){
  auth.createUserWithEmailAndPassword(regEmail.value,regPass.value)
  .then(r=>{
    db.ref("users/"+r.user.uid).set({portfolio:{BTC:0,ETH:0,GOLD:0}});
    alert("Registered!");
  }).catch(e=>alert(e.message));
}

function loginUser(){
  auth.signInWithEmailAndPassword(loginEmail.value,loginPass.value)
  .then(r=>showDashboard(r.user.uid))
  .catch(e=>alert(e.message));
}

function logoutUser(){
  auth.signOut();
  dashboard.style.display="none";
  authForms.style.display="grid";
}

function showDashboard(uid){
  authForms.style.display="none";
  dashboard.style.display="block";
  loadPortfolio(uid);
  loadCharts();
}

async function loadPortfolio(uid){
  const snap=await db.ref("users/"+uid+"/portfolio").get();
  portfolioTable.innerHTML='<tr><th>Asset</th><th>Amount</th></tr>';
  for(let k in snap.val()){
    portfolioTable.innerHTML+=`<tr><td>${k}</td><td>${snap.val()[k]}</td></tr>`;
  }
}

async function deposit(){
  const u=auth.currentUser;
  const ref=db.ref("users/"+u.uid+"/portfolio/"+investAsset.value);
  const cur=(await ref.get()).val()||0;
  ref.set(cur+Number(investAmount.value));
  loadPortfolio(u.uid);
}

async function prices(){
  const d=await fetch("https://api.coingecko.com/api/v3/simple/price?ids=bitcoin,ethereum&vs_currencies=usd").then(r=>r.json());
  btc.innerText=d.bitcoin.usd;
  eth.innerText=d.ethereum.usd;
  gold.innerText=(2350+Math.random()*5).toFixed(2);
}
prices();setInterval(prices,8000);

function loadCharts(){
  new TradingView.widget({container_id:"tv-btc",symbol:"BTCUSD",theme:"dark"});
  new TradingView.widget({container_id:"tv-gold",symbol:"XAUUSD",theme:"dark"});
  new TradingView.widget({container_id:"tv-hero",symbol:"BTCUSDT",theme:"dark"});
  new TradingView.widget({container_id:"tv-news",theme:"dark",feedMode:"all_symbols"});
}
</script>

</body>
</html>
